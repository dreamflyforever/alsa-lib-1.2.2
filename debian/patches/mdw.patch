Package: libasound2
Version: 1.0.14a-1
Severity: normal
Tags: patch

The PCM plugin `lfloat' isn't compiled into libasound.  In particular,
this prevents the `plug' plugin from doing linear<->float conversion,
and in turn this means that hardly any ALSA clients can use the JACK
plugin from libasound2-plugins, because JACK uses FLOAT_LE format
throughout.

The reason for this is quite simple: the configure script is broken!  In
particular, the sense of the `softfloat' check used to decide whether to
disable the plugin is wrong!  (That's aside from the question of whether
it's sensible to fail to build the thing just because it might be slow.)


Index: alsa-lib-1.0.14a/configure.in
===================================================================
--- alsa-lib-1.0.14a.orig/configure.in  2007-06-27 16:24:58.000000000
+0100
+++ alsa-lib-1.0.14a/configure.in       2007-06-27 16:25:19.000000000
+0100
@@ -416,7 +416,7 @@
   build_pcm_share="no"
 fi
 
-if test "$softfloat" != "yes"; then
+if test "$softfloat" = "yes"; then
   build_pcm_lfloat="no"
 fi
 
Index: alsa-lib-1.0.14a/configure
===================================================================
--- alsa-lib-1.0.14a.orig/configure     2007-06-27 16:25:23.000000000
+0100
+++ alsa-lib-1.0.14a/configure  2007-06-27 16:25:38.000000000 +0100
@@ -20946,7 +20946,7 @@
   build_pcm_share="no"
 fi
 
-if test "$softfloat" != "yes"; then
+if test "$softfloat" = "yes"; then
   build_pcm_lfloat="no"
 fi
 

-- System Information:
Debian Release: lenny/sid
  APT prefers testing
  APT policy: (500, 'testing')
Architecture: i386 (i686)

Kernel: Linux 2.6.18-4-686 (SMP w/2 CPU cores)
Locale: LANG=C, LC_CTYPE=C (charmap=ANSI_X3.4-1968)
Shell: /bin/sh linked to /bin/bash

Versions of packages libasound2 depends on:
ii  libc6                         2.5-9+b1   GNU C Library: Shared libraries

libasound2 recommends no packages.

-- no debconf information


_______________________________________________
Pkg-alsa-devel mailing list
Pkg-alsa-devel@lists.alioth.debian.org
http://lists.alioth.debian.org/mailman/listinfo/pkg-alsa-devel

